{% extends 'base.html' %} {% block body%}
 
{% load socialaccount %}
 

<!-- <input type="text" name="first_name" placeholder="Enter Name"> <br>
<input type="text" name="last_name" placeholder="Enter Last"> <br>
<input type="text" name="username" placeholder="Enter Username"> <br>
<input type="email" name="email" placeholder="Enter Email"> <br>
<input type="password" name="password1" placeholder="Password"> <br>
<input type="password" name="password2" placeholder="Confirm Password"> <br>
<button type="submit">Submit</button> -->




 

    <!-- step 1 -->
    <div class="tab-panel active" id="auth-step1">

<div class="user-auth-container">

    <div class="user-auth-heading">
        <h1>SignUp</h1>
        <h2>Create Account & Upload Ringtones</h2>
        <p style=" display:none;margin: 30px 0;font-weight: 400;color: #ff5722;font-size: 13px;text-align: center;margin-bottom: -12px;" id="error"></p>
    </div>

    <div class="user-auth-body">
         
        <form id="register" method="post">
            {% csrf_token %}
            <div class="user-auth-input" id="mob-number">
                 
                <input type="text" class="input-field" name='dname' autocomplete="off" required id="dname">
                <label class="input-label">Display Name</label>

            </div>
            <div class="user-auth-input" id="mob-number">
                 
                <input type="text" class="input-field" name='email' autocomplete="off" required id="email">
                <label class="input-label">Email</label>

            </div>
            <div class="user-auth-input" id="mob-number">
                 
                <input type="text" class="input-field" name='password' autocomplete="off" required  id="password">
                <label class="input-label">Password</label>

            </div>
            
        
         

           

           

            <div class="action">
                <button class="action-button" id="step1-btn" type="submit">CONTINUE</button>
            </div>

            <div class="or-method">
                <strong>OR</strong>
            </div>
            <div class="createbtn">
                <a href="/login">LOGIN</a>
                   
                
           </div>

           

            <div class="google-login">
                <a href="{% provider_login_url 'google' %}"> <button type="button" class="login-with-google-btn">
                      CONTINUE WITH GOOGLE
                </button></a>
            </div>
        </form>
    </div>

    <div class="user-auth-footer">
        <p>By creating an account or logging in, you agree with Laywoonâ€™s <a href="">Terms and
                Conditions</a> and <a href=""> Privacy Policy.</a></p>
    </div>


</div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- <script>
   



        $('#save').click(function(){
                gamename = $('#gamename').val()
                bgmiid = $('#bgmiid').val()
                dob = $('#dob').val() 
                email = $('#email').val() 
                bgmiusername = $("#bgmiusername").val()
                bgmiidlevel = $("#bgmiidlevel").val()
        
        
        
                $('#verify-bgmiid').hide()
                $('#verify-dob').hide()
        
        
                // #verify-bgmiid
        
        
                $.ajax({
                    method:'POST',
                    url: '/profile-update/',
        
        
                    data:{
                        gamename: gamename,
                        bgmiid: bgmiid,
                        email: email,
                        dob:dob,
                        bgmiusername:bgmiusername,
                        bgmiidlevel:bgmiidlevel,
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    beforeSend: function() {
                      $('#response').html("<img src='/images/loading.gif' />");
                    },
                    success:function(res){
                        if (res['bgmiid_er']){
                            $('#bgmiid').val(res['bgmiid_er']).css('color','#E2373f')
                        }
                        else if (res['newdob_er']) {
                            $('#verify-dob').text(res['newdob_er']).css('display','flex')
                        } else {
                            $('#finalerror').text(res['error']) 
                        //     setTimeout(() => {
                        //     $('#finalerror').text(res['error']).hide()
                        // }, 4000);
                        }   
                       
                        
                         
                        $('#bgmiidlevel').val(res['data']['newbgmiidlevel'])            
                        $('#bgmiusername').val(res['data']['newbgmiusername']) 
                        $('#gamename').val(res['data']['newgamename']) 
                        $('#bgmiid').val(res['data']['newbgmiid'])
                        $('#dob').val(res['data']['newdob'])
                        $('#email').val(res['data']['newgemail'])
                        $('.proupdate').prop("disabled", true);
                        $('.profile-btn').hide()
                        if(res['status']){
                            $('#finalerror').text(res['error']).hide()
                            $('#updatemsg').text(res['status']).show()
                        }
                        
                        setTimeout(() => {
                            $('#updatemsg').text(res['status']).hide()
                        }, 2000);
                       
                        
                    }
                })
            })
        </script> -->


    <script>
        $(document).on("submit" , "#register" , function(e){
            e.preventDefault();
            email = $("#email").val()
            password = $("#password").val()
            dname = $("#dname").val()

            
            
            $.ajax({
                    method:"POST",
                    url:"/signup/",
                    
                    data:{
                        email:email,
                        password:password,
                        dname:dname,
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    beforeSend: function() {
                $('#step1-btn').html(`<svg style="vertical-align: bottom;" version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    width="22px" height="22px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">
                   <path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946
                     s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634
                     c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"/>
                   <path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0
                     C22.32,8.481,24.301,9.057,26.013,10.047z">
                     <animateTransform attributeType="xml"
                       attributeName="transform"
                       type="rotate"
                       from="0 20 20"
                       to="360 20 20"
                       dur="0.9s"
                       repeatCount="indefinite"/>
                     </path>
                   </svg>`)
                   $('#step1-btn').prop('disabled', true);  
                    }, 
                    success: function(response){
                        // $("#mob-number").append(response.msg)
                        var url = "/signup/";
                        
                        // console.log(response.Authstatus)
                        if (response['success']){
                            $(location).attr('href',url);
                        } else if (response['UserExists']) {
                            $('#error').text(response['UserExists']).css('display','block')
                        } else if (response['password_error']) {
                            $('#error').text(response['password_error']).css('display','block')
                        }else{
                            $('#error').text(response['email_error']).css('display','block')

                        }
                         
                    },
                    complete:function(data){
                $('#step1-btn').text("CONTINUE") 
                $('#step1-btn').prop('disabled', false);  
                     
                }
                    
                })
        })
    </script>
 
{% endblock body %}